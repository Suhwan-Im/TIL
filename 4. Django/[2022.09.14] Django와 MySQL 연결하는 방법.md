# Django와 MySQL 연결하는 방법



### 1. 장고 프로젝트 가상환경에서 라이브러리 설치

- 프로젝트(backend)내 GitBash창에서 `pip install mysqlclient` 명령어를 통해 라이브러리 설치



### 2. MySQL Workbench에서 DB 생성

- MySQL Workbench에서 'Local instance MySQL'에 관리자인 root계정으로 접속
- 상단의 DB 아이콘(왼쪽에서 네번째 - 'Create a new schema in the connected server') 클릭
- DB 이름 설정 후 (charset 및 collation은 default값으로 유지) Apply 클릭
- DB 생성 완료



### 3. 프로젝트내 설정 변경하기

- 프로젝트(backend) 안에서 `touch my_settings.py` 또는 수동으로 my_settings.py 파일 생성

- my_settings.py 파일에 아래의 코드 작성하기

  ```python
  DATABASES = {
      'default' : {
          'ENGINE': 'django.db.backends.mysql',    [1]
          'NAME': 'test_db',                       [2]
          'USER': 'root',                          [3]
          'PASSWORD': 'password',                  [4]
          'HOST': 'localhost',                     [5]
          'PORT': '3306',                          [6]
      }
  }
  ```

  [ 1 ] : 사용할 엔진 설정. 그대로 두면 됨
  [ 2 ] : 연동할 MySQL의 데이터베이스 이름
  [ 3 ] : DB 접속 계정명
  [ 4 ] : 해당 DB 접속 계정 비밀번호
  [ 5 ] : 실제 DB 주소, 따로 설정 안했으면 그대로 두면 됨
  [ 6 ] : 포트번호, 따로 설정 안했으면 그대로 두면 됨

  

- 장고 프로젝트 폴더 내 settings.py에서 아래의 코드를 변경해주기

  ```python
  # 변경 전
  DATABASES = {
      'default': {
          'ENGINE': 'django.db.backends.sqlite3',
          'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
      }
  }
  ```

  ```python
  # 변경 후
  import my_settings
  
  DATABASES = my_settings.DATABASES
  ```



### 4. 테이블 생성 후 migrate 해주기

- 장고 애플리케이션내 Models.py에서 테이블 생성해주기

  ```python
  # 예시
  class Article(models.Model):
      title = models.CharField(max_length=30)
      content = models.TextField()
  ```

- GitBash 터미널 창에서 아래의 코드를 순서대로 실행

  `python manage.py makemigrations`

  `python manage.py migrate`

- MySQL Workbench에서 연동된 테이블 확인

  `use test_db;`
  `select * from application_article;`





#### 참조문서

- https://velog.io/@devmin/Django-MySQL-Connect
- https://diaryofgreen.tistory.com/132