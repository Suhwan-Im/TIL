# 코사인 유사도 (코드 정리)



- 코사인 유사도란?

  - 벡터간의 코사인 각도를 이용해 얼마나 유사한지를 산정하는 비교 방식

    ![cs](%EC%BD%94%EC%82%AC%EC%9D%B8%20%EC%9C%A0%EC%82%AC%EB%8F%84%20(%EC%BD%94%EB%93%9C%20%EC%A0%95%EB%A6%AC).assets/cs-16649529718151.png)
  
- 샘플 데이터

  - 유저 재료: [양파, 토마토, 스팸, 레몬, 계란]

    레시피1 재료: [고구마, 양파, 버터, 꿀, 치즈]

    레시피2 재료: [스팸, 양파, 계란, 대파, 간장]

  |         | 간장 | 계란 | 고구마 | 꿀   | 대파 | 레몬 | 버터 | 스팸 | 양파 | 치즈 | 토마토 |
  | ------- | ---- | ---- | ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ------ |
  | 유저    | 0    | 1    | 0      | 0    | 0    | 1    | 0    | 1    | 1    | 0    | 1      |
  | 레시피1 | 0    | 0    | 1      | 1    | 0    | 0    | 1    | 0    | 1    | 1    | 0      |
  | 레시피2 | 1    | 1    | 0      | 0    | 1    | 0    | 0    | 1    | 1    | 0    | 0      |

  - 유저 = [0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1]

    레시피1 = [0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0]

    레시피2 = [1, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0]



- 코사인 유사도 계산

  - 유저 재료와 레시피 1의 코사인 유사도

    ![image-20221005152811951](%EC%BD%94%EC%82%AC%EC%9D%B8%20%EC%9C%A0%EC%82%AC%EB%8F%84%20(%EC%BD%94%EB%93%9C%20%EC%A0%95%EB%A6%AC).assets/image-20221005152811951.png)

  - 유저 재료와 레시피 2의 코사인 유사도

    ![image-20221005152905275](%EC%BD%94%EC%82%AC%EC%9D%B8%20%EC%9C%A0%EC%82%AC%EB%8F%84%20(%EC%BD%94%EB%93%9C%20%EC%A0%95%EB%A6%AC).assets/image-20221005152905275.png)

- 코사인 유사도 적용

  - numpy모듈을 이용해 코사인 유사도 식 구현

    ![image-20221005153153563](%EC%BD%94%EC%82%AC%EC%9D%B8%20%EC%9C%A0%EC%82%AC%EB%8F%84%20(%EC%BD%94%EB%93%9C%20%EC%A0%95%EB%A6%AC).assets/image-20221005153153563.png)

  - 사용자가 입력한 재료를 DB의 모든 레시피의 재료와 코사인 유사도를 구한 후, 코사인 유사도 수치가 높은 순으로 정렬

    ![image-20221005153352507](%EC%BD%94%EC%82%AC%EC%9D%B8%20%EC%9C%A0%EC%82%AC%EB%8F%84%20(%EC%BD%94%EB%93%9C%20%EC%A0%95%EB%A6%AC).assets/image-20221005153352507.png)

  - 코사인 유사도 결과 값 [레시피 id, 코사인 유사도 수치]
  
    ![image-20221005153653407](%EC%BD%94%EC%82%AC%EC%9D%B8%20%EC%9C%A0%EC%82%AC%EB%8F%84%20(%EC%BD%94%EB%93%9C%20%EC%A0%95%EB%A6%AC).assets/image-20221005153653407.png)
  
  - 코사인 유사도 순으로 n개의 [음식 id, 음식 이름, 음식 사진, 난이도, 음식 양, 조리 시간, 조회수] 데이터 반환