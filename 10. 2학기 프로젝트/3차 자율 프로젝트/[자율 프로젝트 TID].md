## 자율 프로젝트 TID

#### 부제: 축배 - 월드컵 정보 제공 서비스



---

#### 자율주제

​	[10.10 ~ 11.18] 자율 프로젝트

---



### 221117 (목)

- 수정된 API 데이터 DB에 반영
  - Statorium측에서 수정 승인
- 프로젝트에 사용하는 모든 API 점검 (실행여부 확인)



### 221116 (수)

- 32개국 최종 선수 명단 DB에 업데이트
- Statorium API에 이메일로 잘못된 데이터 업데이트 요청



### 221115(화)

- 나머지 6개국 최종명단 체크
- UCC 촬영



### 221114 (월)

- DB에 선수 최종명단 + 한글화 업데이트
  - 6개국 API는 아직 미완성 (에콰도르, 이란, 멕시코, 튀니지, 캐나다, 가나)




### 221111 (금)

- 프론트 작업 보조
  - 선수카드에 국가정보 넣기 (국기로고)



### 221110 (목)

- 프론트 작업 보조
  - 리액트 및 자바스크립트 학습
  - 선수카드 애니매이션 구상




### 221109 (수)

- 월드컵 최종 명단 정보 확인 및 API 활용법 설계
- JavaScript 자습



### 221108 (화)

- 경기 및 선수 정보 업데이트 자동화 (이어서)
- 선수 랭킹 및 선수 정보 API 작성



### 221107 (월)

- 경기 및 선수 정보 업데이트 자동화
  - 방법: threading, schedule, crontab, APSheduler




### 221104 (금)

- 경기 및 선수 정보 업데이트 코드 작성
  - 경기 정보 업데이트 설계
    Live Matches API 활용 (3시간 전 ~ 지금 ~ 1 시간 후 사이 모든 경기 id 및 스코어 반환)
    - 1분 간격으로 업데이트 하며 경기 상태 체크
    - [’matchStatus’][’value’]가 1이 되면 정보 업데이트 (-1: 경기중, 0: 예정, 1: 경기 끝) — 경기중이면 실시간 스코어 표기하기!
      - 해당 경기 id를 통해 team table 업데이트 (승, 무, 패, 득실차)
        1. match table에서 if match_status == 0: team1 & team2 스코어 수정 후 match_status = 1로 변경
        2. 같은 if문 내에서 방금 사용한 스코어 변수를 team table에 적용 스코어 로직으로 승, 무, 패 구별 후 팀 항목에 += 1 골득실도 계산 후 += 추가 승점도 추가 (승*3 + 무*1)
  - 선수 정보 업데이트 설계
    Matches > Get Match by ID API 활용
    (위의 경기 정보 업데이트 직후 api를 활용해서 바로 진행)
    - goal, assist, yellow/red card 추가하기 [match > home/awayParticipant > events] 활용하여 계산
    - run_time 추가하기 [match > home/awayParticipant > squad > sub > minute]과 [match > matchDuration]을 활용하여 계산




### 221103 (목)

- 선수 시세 변동 알고리즘 작성 및 테스트
  - 시세 초기값 설정
    - 소속 리그, 소속 국가 (피파랭킹)
    - 선수 초기 가치 = 100 * (100 - 피파랭킹) * 소속 리그 순위별 가산점 (1.0~1.5)
      - EPL, La Liga, Serie A, Bundesliga: 1위부터 1.50, 1.49, 1.48 ...
        Ligue 1: 1위부터 1.45, 1.44, 1.43 ...
        Liga Portugal, Eredivisie: 1위부터 1.40, 1.39, 1.38 ...
        EPL 2부: 1위부터 1.30, 1.29,  1.28 ...
        K리그: 1위부터 1.20, 1.19, 1.18 ...
      - 예시1: 비인기 리그에서 뛰는 국대 1위팀 선수 = 100 * (100 - 1) * 1.0 = 9900
        예시2: EPL 6위팀에서 뛰는 국대 25위팀 선수 = 100 * (100 - 25) * 1.45 = 10,875
        예시3: EPL 2부 1위팀에서 뛰는 국대 10위팀 선수 = 100 * (100 - 10) * 1.2 = 10,800
  - 변동 알고리즘
    - 경기 출장시간(분), 경기 결과, ~~볼 점유율~~ (~~랭킹에 기반한 상대적 비율~~)
    - 가점: 골, 어시스트, ~~팀 슈팅 및 유효슈팅~~, ~~선방~~, ~~코너킥횟수~~ (~~포지션에 기반한 비율 적용~~)
    - 감점: 옐로우 카드, 레드 카드, ~~자책골~~, ~~팀파울~~  (~~포지션에 기반한 비율 적용~~)
    - 선수 가치 = 초기가치 * (1 + 0.3 * 골) * (1 + 0.1 * 어시스트) * (1 - 0.05 * 옐로우카드) * (1 - 0.2 * 레드카드) * (1 + 0.002 * 출장시간) +
      (3000 * 승) + (1000 * 무) - (500 * 패) + (100 * 골득실)



### 221102 (수)

- 조별 국가 정보 API 작성
- 선수 시세 변동 알고리즘 작성
  - 소속팀 리그별 순위에 따른 가산점 데이터 구축




### 221101 (화)

- 선수 시세 변동 알고리즘 기획
- 그룹별 팀 순위 테이블 API 작성



### 221031 (월)

- 경기장 및 국가명 한글 변환 코드 작성
- 선수 포지션 변환 코드 작성 (1: GK, 2: DF, 3: MF, 4: FW)
- 임시 선수명 한글 변환 코드 작성



### 221028 (금)

- 백-프론트 데이터 전송용 API 코드 작성
  - 경기 정보 조회 (국가별 & 날짜별)
  - 경기 상세 정보 조회
  - 팀 정보 조회




### 221027 (목)

- API를 통해 받은 데이터를 DB에 저장



### 221026 (수)

- [SSAFY MeetUp 행사]



### 221025 (화)

- API를 통한 데이터 가공 (경기정보 & 선수정보)



### 221024 (월)

- API를 통한 데이터 가공 (경기정보)



### 221021(금)

- 중간발표 자료 준비
  - Canva 활용
  
- ERD 수정

  ![image-20221031155937296](%5B%EC%9E%90%EC%9C%A8%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20TID%5D.assets/image-20221031155937296.png)




### 221020 (목)

- ERD 설계 (1차)

  ![image-20221020110543745](%5B%EC%9E%90%EC%9C%A8%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20TID%5D.assets/image-20221020110543745.png)



### 221019 (수)

- 와이어프레임 작성



### 221018 (화)

- [예비군 훈련으로 인한 공가]



### 221017 (월)

- 역할 분담 (추가)
  - 경기정보
    - 기본 정보 api를 통해 받아온 후 데이터 정제
  - 선수 (DB 테이블 필요)
    - 선수 별 가치 책정 (api에서 받아온 event point와 소속 리그 별 점수를 할당하여 계산 - 추후 월드컵 경기 내용에 따라서 가치 변동 가능)
    - 시세 알고리즘 구현 (월드컵 경기에서 골, 어시스트, 출전시간, 파울, 경고 등의 변수를 이용)



### 221014 (금)

- 역할 분담 (내가 맡은 부분)
  - 경기정보
    - 기본 정보 api를 통해 받아온 후 데이터 정제
- Jira 이슈 생성



### 221013 (목)

- 팀회의 및 기획
  - 기능 선정
  - 와이어프레임 작성



### 221012 (수)

- 주제 선정 및 기획
  - 월드컵 정보 제공 서비스
    - API (https://statorium.com/fifa-world-cup-2022-api)



### 221011 (화)

- 팀빌딩